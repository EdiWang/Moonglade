function ImageUploader(n,t,i){var r="";this.uploadImage=function(t){if(r){document.querySelector(`#btn-upload-${n}`).classList.add("disabled");document.querySelector(`#btn-upload-${n}`).setAttribute("disabled","disabled");var i=r.replace(/^data:image\/(png|jpeg|jpg);base64,/,"");callApi(t,"POST",i,function(){$(`#${n}modal`).modal("hide");blogToast.success("Updated");d=new Date;document.querySelector(`.blogadmin-${n}`).src=`/${n}?${d.getTime()}`},function(){document.querySelector(`#btn-upload-${n}`).classList.remove("disabled");document.querySelector(`#btn-upload-${n}`).removeAttribute("disabled")})}else blogToast.error("Please select an image")};this.fileSelect=function(u){var f,e;if(u.stopPropagation(),u.preventDefault(),window.File&&window.FileReader&&window.FileList&&window.Blob){if(u.dataTransfer?(f=u.dataTransfer.files[0],document.querySelector(`.custom-file-label-${n}`).innerText(f.name)):f=u.target.files[0],!f.type.match("image.*")){blogToast.error("Please select an image file.");return}e=new FileReader;e.onloadend=function(){var u=new Image;u.src=e.result;u.onload=function(){var s=t,h=t,f=u.width,e=u.height,o,c,l;f>e?f>s&&(e*=s/f,f=s):e>h&&(f*=h/e,e=h);o=document.createElement("canvas");o.width=f;o.height=e;c=o.getContext("2d");c.drawImage(this,0,0,f,e);r=o.toDataURL(i);l=document.querySelector(`#${n}DropTarget`);l.innerHTML=`<img class="img-fluid" src="${r}" />`;document.querySelector(`#btn-upload-${n}`).classList.remove("disabled");document.querySelector(`#btn-upload-${n}`).removeAttribute("disabled")}};e.readAsDataURL(f)}else blogToast.error("The File APIs are not fully supported in this browser.")};this.dragOver=function(n){n.stopPropagation();n.preventDefault();n.dataTransfer.dropEffect="copy"};this.bindEvents=function(){document.getElementById(`${n}ImageFile`).addEventListener("change",this.fileSelect,!1);var t=document.getElementById(`${n}DropTarget`);t.addEventListener("dragover",this.dragOver,!1);t.addEventListener("drop",this.fileSelect,!1)};this.getDataUrl=function(){return r}}