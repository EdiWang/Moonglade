@using Moonglade.Data.Entities
@using Moonglade.Data.Exporting
@using Moonglade.Widgets.Types
@using System.Text.Json

@model WidgetEntity

@{
    var buttons = Model.ContentCode != null
        ? JsonSerializer.Deserialize<List<ButtonLinkItem>>(Model.ContentCode, MoongladeJsonSerializerOptions.Default)
        : new List<ButtonLinkItem>();
}

@if (buttons is { Count: > 0 })
{
    <div class="widget-button-link-container">
        <div class="btn-group w-100" role="group">
            @foreach (var btn in buttons)
            {
                var sterilizedUrl = Edi.AspNetCore.Utils.SecurityHelper.SterilizeLink(btn.Url);
                <a href="@sterilizedUrl"
                   class="btn @btn.CssClass"
                   target="@(btn.OpenInNewTab ? "_blank" : null)"
                   rel="@(btn.OpenInNewTab ? "noopener noreferrer" : null)">@btn.Text</a>
            }
        </div>
    </div>
}
